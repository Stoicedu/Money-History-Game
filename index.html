<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Currency History Timeline Game - Educational Journey Through Money</title>
    <meta name="description" content="Interactive educational game exploring the fascinating evolution of currency from ancient barter systems to modern digital money">
    <meta name="keywords" content="currency history, educational game, timeline, money evolution, interactive learning">
</head>
<body>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
    }

    .game-container {
        max-width: 1200px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        backdrop-filter: blur(10px);
    }

    .game-header {
        text-align: center;
        margin-bottom: 30px;
        padding: 20px 0;
        border-bottom: 3px solid #667eea;
    }

    .game-title {
        font-size: 2.5rem;
        font-weight: bold;
        color: #2d3748;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
    }

    .game-subtitle {
        font-size: 1.2rem;
        color: #4a5568;
        font-weight: 300;
    }

    .game-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-bottom: 30px;
        flex-wrap: wrap;
    }

    .btn {
        padding: 12px 25px;
        font-size: 1.1rem;
        font-weight: 600;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .btn-primary {
        background: linear-gradient(45deg, #4299e1, #667eea);
        color: white;
        box-shadow: 0 4px 15px rgba(66, 153, 225, 0.3);
    }

    .btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(66, 153, 225, 0.4);
    }

    .btn-secondary {
        background: linear-gradient(45deg, #48bb78, #38a169);
        color: white;
        box-shadow: 0 4px 15px rgba(72, 187, 120, 0.3);
    }

    .btn-secondary:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(72, 187, 120, 0.4);
    }

    .game-status {
        text-align: center;
        font-size: 1.2rem;
        padding: 15px;
        margin-bottom: 25px;
        border-radius: 10px;
        background: linear-gradient(45deg, #e6fffa, #b2f5ea);
        border: 2px solid #4fd1c7;
        font-weight: 500;
    }

    .cards-container {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
    }

    .currency-card {
        background: white;
        border-radius: 15px;
        padding: 20px;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
        cursor: move;
        transition: all 0.3s ease;
        border: 3px solid transparent;
        position: relative;
        overflow: hidden;
    }

    .currency-card:before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: linear-gradient(90deg, #4299e1, #667eea);
    }

    .currency-card:hover {
        transform: translateY(-5px) scale(1.02);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
    }

    .currency-card.dragging {
        opacity: 0.7;
        transform: rotate(5deg);
        z-index: 1000;
    }

    .currency-card.placed {
        opacity: 0.6;
        transform: scale(0.95);
        cursor: not-allowed;
    }

    .card-icon {
        font-size: 3rem;
        text-align: center;
        margin-bottom: 15px;
        filter: drop-shadow(2px 2px 4px rgba(0, 0, 0, 0.1));
    }

    .card-title {
        font-size: 1.4rem;
        font-weight: bold;
        color: #2d3748;
        margin-bottom: 8px;
        text-align: center;
    }

    .card-period {
        font-size: 1rem;
        color: #667eea;
        font-weight: 600;
        text-align: center;
        margin-bottom: 10px;
    }

    .card-description {
        font-size: 0.95rem;
        color: #4a5568;
        line-height: 1.5;
        text-align: justify;
    }

    /* Era-specific card colors */
    .currency-card[data-era="ancient"]:before { background: linear-gradient(90deg, #d69e2e, #f6ad55); }
    .currency-card[data-era="medieval"]:before { background: linear-gradient(90deg, #38a169, #48bb78); }
    .currency-card[data-era="renaissance"]:before { background: linear-gradient(90deg, #805ad5, #9f7aea); }
    .currency-card[data-era="industrial"]:before { background: linear-gradient(90deg, #e53e3e, #fc8181); }
    .currency-card[data-era="modern"]:before { background: linear-gradient(90deg, #3182ce, #4299e1); }

    .timeline-container {
        background: linear-gradient(45deg, #f7fafc, #edf2f7);
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 25px;
        border: 2px dashed #cbd5e0;
        min-height: 200px;
        position: relative;
    }

    .timeline-title {
        font-size: 1.5rem;
        font-weight: bold;
        color: #2d3748;
        text-align: center;
        margin-bottom: 20px;
        text-transform: uppercase;
        letter-spacing: 2px;
    }

    .timeline-slots {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        gap: 15px;
    }

    .timeline-slot {
        background: white;
        border: 2px dashed #a0aec0;
        border-radius: 10px;
        padding: 15px;
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
        position: relative;
    }

    .timeline-slot.drag-over {
        background: linear-gradient(45deg, #bee3f8, #90cdf4);
        border-color: #4299e1;
        transform: scale(1.05);
    }

    .timeline-slot .slot-number {
        position: absolute;
        top: 5px;
        left: 10px;
        font-size: 0.8rem;
        font-weight: bold;
        color: #a0aec0;
    }

    .timeline-slot .slot-label {
        font-size: 0.9rem;
        color: #718096;
        text-align: center;
        font-weight: 500;
    }

    .score-container {
        display: flex;
        justify-content: space-around;
        background: linear-gradient(45deg, #2d3748, #4a5568);
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
    }

    .score-item {
        text-align: center;
    }

    .score-label {
        font-size: 0.9rem;
        opacity: 0.8;
        margin-bottom: 5px;
        text-transform: uppercase;
        letter-spacing: 1px;
    }

    .score-value {
        font-size: 1.8rem;
        font-weight: bold;
    }

    .explanation-panel {
        background: linear-gradient(45deg, #f0fff4, #c6f6d5);
        border-radius: 15px;
        padding: 25px;
        margin-top: 25px;
        border-left: 5px solid #48bb78;
        display: none;
    }

    .explanation-title {
        font-size: 1.3rem;
        font-weight: bold;
        color: #2f855a;
        margin-bottom: 15px;
    }

    .explanation-content {
        font-size: 1rem;
        line-height: 1.6;
        color: #2d3748;
    }

    /* Mobile Responsiveness */
    @media (max-width: 768px) {
        .game-container {
            margin: 0;
            border-radius: 0;
            padding: 20px 15px;
        }

        .game-title {
            font-size: 2rem;
        }

        .cards-container {
            grid-template-columns: 1fr;
        }

        .timeline-slots {
            grid-template-columns: repeat(2, 1fr);
        }

        .game-controls {
            flex-direction: column;
            align-items: center;
        }

        .btn {
            width: 200px;
        }
    }

    /* Animation for correct placement */
    @keyframes correctPlacement {
        0% { background-color: #48bb78; }
        50% { background-color: #38a169; }
        100% { background-color: #2f855a; }
    }

    .timeline-slot.correct {
        animation: correctPlacement 0.6s ease;
        background: linear-gradient(45deg, #c6f6d5, #9ae6b4);
        border-color: #48bb78;
    }

    .timeline-slot.incorrect {
        background: linear-gradient(45deg, #fed7d7, #feb2b2);
        border-color: #e53e3e;
        animation: shake 0.5s ease;
    }

    @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
    }

    /* Pulse animation for interactive elements */
    .btn-primary:hover, .btn-secondary:hover {
        animation: pulse 0.6s infinite alternate;
    }

    @keyframes pulse {
        from { transform: translateY(-2px) scale(1); }
        to { transform: translateY(-2px) scale(1.05); }
    }
</style>

    <div class="game-container">
        <!-- Game Header -->
        <div class="game-header">
            <h1 class="game-title">💰 Currency History Timeline</h1>
            <p class="game-subtitle">An Interactive Educational Journey Through the Evolution of Money</p>
        </div>

        <!-- Game Controls -->
        <div class="game-controls">
            <button id="start-game" class="btn btn-primary">🎮 Start Game</button>
            <button id="reset-game" class="btn btn-secondary">🔄 Reset Game</button>
        </div>

        <!-- Game Status -->
        <div id="game-status" class="game-status">
            🎓 Ready to explore the fascinating history of money? Click 'Start Game' to begin your educational journey!
        </div>

        <!-- Score Container -->
        <div class="score-container">
            <div class="score-item">
                <div class="score-label">Score</div>
                <div id="score-value" class="score-value">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Attempts</div>
                <div id="attempts-value" class="score-value">0</div>
            </div>
            <div class="score-item">
                <div class="score-label">Accuracy</div>
                <div id="accuracy-value" class="score-value">0%</div>
            </div>
        </div>

        <!-- Currency Cards Container -->
        <div id="currency-cards" class="cards-container">
            <!-- Currency cards will be dynamically generated here -->
        </div>

        <!-- Timeline Container -->
        <div class="timeline-container">
            <h2 class="timeline-title">📅 Chronological Timeline</h2>
            <div id="timeline-slots" class="timeline-slots">
                <!-- Timeline slots will be dynamically generated here -->
            </div>
        </div>

        <!-- Educational Explanation Panel -->
        <div id="explanation-panel" class="explanation-panel">
            <h3 id="explanation-title" class="explanation-title">Currency Details</h3>
            <p id="explanation-content" class="explanation-content"></p>
        </div>
    </div>


// Comprehensive English currency data with educational content
const currencyHistoryData = [
    {
        id: "barter",
        title: "Barter System",
        period: "9000-6000 BC",
        year: -8000,
        icon: "🔄",
        era: "ancient",
        description: "Direct exchange of goods and services without standardized money",
        explanation: "Before the invention of money, people traded goods and services directly through bartering. This system worked well in small communities where everyone knew each other, but became complicated as societies grew larger. The main challenge was the 'double coincidence of wants' - finding someone who had what you wanted and wanted what you had."
    },
    {
        id: "commodity",
        title: "Commodity Money",
        period: "6000-3000 BC",
        year: -5000,
        icon: "🐚",
        era: "ancient",
        description: "Valuable objects used as medium of exchange (shells, cattle, grain)",
        explanation: "As trade expanded, certain valuable and portable objects began serving as money. Cowrie shells were popular in many cultures due to their durability and difficulty to counterfeit. Cattle represented wealth in pastoral societies, while grain served as currency in agricultural communities. These commodities had intrinsic value and were widely accepted."
    },
    {
        id: "metal",
        title: "Metal Currency",
        period: "3000-700 BC",
        year: -2000,
        icon: "⚖️",
        era: "ancient",
        description: "Precious metals weighed and traded by value",
        explanation: "Metals like gold, silver, and bronze became preferred forms of money because they were durable, divisible, and had consistent value. Initially, pieces of metal were weighed for each transaction using scales. This system was more reliable than commodity money but still required verification of purity and accurate weighing for every exchange."
    },
    {
        id: "coin",
        title: "First Coins",
        period: "700-30 BC",
        year: -650,
        icon: "🪙",
        era: "ancient",
        description: "Standardized metal pieces with government backing (Lydian coins)",
        explanation: "The first true coins appeared in the ancient kingdom of Lydia (modern-day Turkey) around 650 BC. These electrum coins (gold-silver alloy) were stamped with official marks guaranteeing their weight and purity. This innovation eliminated the need to weigh and test metal for each transaction, greatly facilitating trade throughout the ancient world."
    },
    {
        id: "paper",
        title: "Paper Money",
        period: "960-1020 AD",
        year: 990,
        icon: "📜",
        era: "medieval",
        description: "First government-issued paper currency during Song Dynasty China",
        explanation: "The world's first government-issued paper money, called 'Jiaozi,' appeared in Sichuan Province during China's Song Dynasty. Initially, these were promissory notes issued by merchants, but the government soon took control to prevent counterfeiting. This revolutionary concept allowed for easier long-distance trade and reduced the need to transport heavy metal coins."
    },
    {
        id: "banking",
        title: "Banking Systems",
        period: "1400-1600 AD",
        year: 1500,
        icon: "🏛️",
        era: "renaissance",
        description: "Development of modern banking and credit systems in Renaissance Europe",
        explanation: "During the Renaissance, Italian city-states pioneered modern banking practices. The Medici Bank and others introduced concepts like double-entry bookkeeping, letters of credit, and international exchange. These innovations allowed merchants to conduct business across great distances without physically transporting currency, laying the foundation for modern financial systems."
    },
    {
        id: "gold_standard",
        title: "Gold Standard",
        period: "1870-1971 AD",
        year: 1900,
        icon: "🥇",
        era: "industrial",
        description: "Currency values fixed to gold reserves, providing international stability",
        explanation: "The international gold standard emerged in the late 19th century, where currencies were directly convertible to fixed amounts of gold. This system provided stability for international trade and limited inflation, as money supply was tied to gold reserves. However, it also limited governments' ability to respond to economic crises, ultimately leading to its abandonment during the Great Depression and finally ending in 1971."
    },
    {
        id: "digital",
        title: "Digital Currency",
        period: "1990-Present",
        year: 2009,
        icon: "₿",
        era: "modern",
        description: "Cryptocurrencies and blockchain technology revolutionizing finance",
        explanation: "Digital currencies represent the latest evolution in money, starting with Bitcoin in 2009. Built on blockchain technology, cryptocurrencies offer decentralized, peer-to-peer transactions without traditional banking intermediaries. While still evolving, digital currencies promise faster international transfers, lower fees, and financial inclusion for underbanked populations worldwide."
    }
];

<script>
// Game state management
let gameState = {
    isGameActive: false,
    placedCards: [],
    score: 0,
    attempts: 0,
    startTime: null,
    timeElapsed: 0
};

// English game messages for natural user interaction
const gameMessages = {
    ready: "🎓 Ready to explore the fascinating history of money? Click 'Start Game' to begin your educational journey!",
    gameStarted: "🎮 Game started! Drag the currency cards to the timeline in chronological order. Watch for era colors to guide you!",
    correctPlacement: "✅ Excellent! You've placed the {title} correctly. {period} was indeed the right time period!",
    incorrectPlacement: "❌ Not quite right! The {title} doesn't belong in that time slot. Think about when it actually appeared in history.",
    gameComplete: "🎉 Congratulations! You've successfully arranged the entire currency timeline! Your understanding of monetary history is impressive!",
    gameReset: "🔄 Game reset! All currency cards have been returned. Ready for another educational adventure?",
    showExplanation: "📚 Click on any placed card to learn more fascinating details about that currency period!",
    loading: "⏳ Preparing your currency history adventure...",
    error: "⚠️ Something went wrong. Please refresh the page and try again."
};

// Educational explanations for each currency type
const educationalContent = {
    welcome: {
        title: "Welcome to Currency History Timeline!",
        content: "Embark on an educational journey through the evolution of money from ancient barter systems to modern digital currencies. This interactive timeline will help you understand how human civilization developed increasingly sophisticated methods of trade and value exchange."
    },
    instructions: {
        title: "How to Play",
        content: "1. Click 'Start Game' to begin your journey\n2. Drag each currency card from the collection area\n3. Drop them onto the timeline in chronological order\n4. Watch for color-coded eras to help guide your decisions\n5. Learn from detailed explanations as you progress\n6. Complete the timeline to master currency history!"
    }
};

// Initialize the game when page loads
document.addEventListener('DOMContentLoaded', function() {
    console.log('🎮 Currency History Game - English Version Initialized');
    initializeGame();
});

// Game initialization function
function initializeGame() {
    updateGameStatus(gameMessages.ready);
    renderCurrencyCards();
    renderTimelineSlots();
    setupEventListeners();
    showWelcomeMessage();
}

// Render currency cards with English content
function renderCurrencyCards() {
    const container = document.getElementById('currency-cards');
    if (!container) return;

    container.innerHTML = '';

    // Shuffle cards for variety in each game session
    const shuffledData = [...currencyHistoryData].sort(() => Math.random() - 0.5);

    shuffledData.forEach(currency => {
        const card = createCurrencyCard(currency);
        container.appendChild(card);
    });
}

// Create individual currency card with enhanced English content
function createCurrencyCard(currency) {
    const card = document.createElement('div');
    card.className = 'currency-card';
    card.draggable = true;
    card.dataset.id = currency.id;
    card.dataset.year = currency.year;
    card.dataset.era = currency.era;

    card.innerHTML = `
        <div class="card-icon">${currency.icon}</div>
        <div class="card-title">${currency.title}</div>
        <div class="card-period">${currency.period}</div>
        <div class="card-description">${currency.description}</div>
    `;

    // Enhanced drag and drop for desktop and mobile
    setupCardDragEvents(card);

    return card;
}

// Enhanced drag event setup for better user experience
function setupCardDragEvents(card) {
    // Desktop drag events
    card.addEventListener('dragstart', handleDragStart);
    card.addEventListener('dragend', handleDragEnd);

    // Mobile touch events for better mobile compatibility
    card.addEventListener('touchstart', handleTouchStart, { passive: false });
    card.addEventListener('touchmove', handleTouchMove, { passive: false });
    card.addEventListener('touchend', handleTouchEnd, { passive: false });

    // Visual feedback on hover
    card.addEventListener('mouseenter', () => {
        if (!card.classList.contains('placed')) {
            card.style.transform = 'translateY(-5px) scale(1.02)';
        }
    });

    card.addEventListener('mouseleave', () => {
        if (!card.classList.contains('placed')) {
            card.style.transform = '';
        }
    });
}

// Drag and drop event handlers
function handleDragStart(e) {
    if (!gameState.isGameActive) {
        e.preventDefault();
        return;
    }

    e.dataTransfer.setData('text/plain', e.target.dataset.id);
    e.target.classList.add('dragging');
    updateGameStatus("🤏 Dragging " + e.target.querySelector('.card-title').textContent + ". Drop it in the correct chronological position!");
}

function handleDragEnd(e) {
    e.target.classList.remove('dragging');
    if (gameState.isGameActive) {
        updateGameStatus(gameMessages.gameStarted);
    }
}

// Touch event handlers for mobile devices
let touchData = { element: null, startX: 0, startY: 0 };

function handleTouchStart(e) {
    if (!gameState.isGameActive || e.target.classList.contains('placed')) {
        return;
    }

    e.preventDefault();
    touchData.element = e.target;
    const touch = e.touches[0];
    touchData.startX = touch.clientX;
    touchData.startY = touch.clientY;

    e.target.classList.add('dragging');
    updateGameStatus("📱 Touch and drag to position " + e.target.querySelector('.card-title').textContent);
}

function handleTouchMove(e) {
    if (!touchData.element) return;

    e.preventDefault();
    const touch = e.touches[0];
    const deltaX = touch.clientX - touchData.startX;
    const deltaY = touch.clientY - touchData.startY;

    touchData.element.style.transform = `translate(${deltaX}px, ${deltaY}px) rotate(5deg)`;
    touchData.element.style.zIndex = '1000';

    // Highlight drop zones on mobile
    const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
    highlightDropZone(elementBelow);
}

function handleTouchEnd(e) {
    if (!touchData.element) return;

    e.preventDefault();
    const touch = e.changedTouches[0];
    const elementBelow = document.elementFromPoint(touch.clientX, touch.clientY);
    const slot = elementBelow?.closest('.timeline-slot');

    if (slot && !slot.querySelector('.currency-card')) {
        handleCardPlacement(touchData.element, slot);
    }

    // Reset touch element styling
    touchData.element.style.transform = '';
    touchData.element.style.zIndex = '';
    touchData.element.classList.remove('dragging');

    // Clear all drop zone highlights
    document.querySelectorAll('.timeline-slot').forEach(s => s.classList.remove('drag-over'));

    touchData.element = null;
    updateGameStatus(gameMessages.gameStarted);
}

// Create timeline slots with English labels
function renderTimelineSlots() {
    const container = document.getElementById('timeline-slots');
    if (!container) return;

    container.innerHTML = '';

    for (let i = 1; i <= 8; i++) {
        const slot = createTimelineSlot(i);
        container.appendChild(slot);
    }
}

function createTimelineSlot(position) {
    const slot = document.createElement('div');
    slot.className = 'timeline-slot';
    slot.dataset.position = position;

    slot.innerHTML = `
        <div class="slot-number">${position}</div>
        <div class="slot-label">Drop currency #${position} here</div>
    `;

    // Desktop drop events
    slot.addEventListener('dragover', handleDragOver);
    slot.addEventListener('drop', handleDrop);
    slot.addEventListener('dragleave', handleDragLeave);

    return slot;
}

// Drop zone event handlers
function handleDragOver(e) {
    e.preventDefault();
    e.target.closest('.timeline-slot').classList.add('drag-over');
}

function handleDragLeave(e) {
    if (!e.target.closest('.timeline-slot').contains(e.relatedTarget)) {
        e.target.closest('.timeline-slot').classList.remove('drag-over');
    }
}

function handleDrop(e) {
    e.preventDefault();
    const slot = e.target.closest('.timeline-slot');
    slot.classList.remove('drag-over');

    if (slot.querySelector('.currency-card')) {
        updateGameStatus("⚠️ This timeline position is already occupied! Try another slot.");
        return;
    }

    const cardId = e.dataTransfer.getData('text/plain');
    const card = document.querySelector(`[data-id="${cardId}"]`);

    if (card) {
        handleCardPlacement(card, slot);
    }
}

// Handle card placement and validation
function handleCardPlacement(card, slot) {
    gameState.attempts++;

    // Move card to slot visually
    const cardClone = card.cloneNode(true);
    cardClone.classList.add('placed');
    cardClone.draggable = false;

    // Remove original card
    card.remove();

    // Add to slot
    slot.innerHTML = '';
    slot.appendChild(cardClone);

    // Validate placement
    const currency = currencyHistoryData.find(c => c.id === card.dataset.id);
    const correctPosition = getCorrectPosition(currency.year);
    const placedPosition = parseInt(slot.dataset.position);

    if (correctPosition === placedPosition) {
        // Correct placement
        slot.classList.add('correct');
        gameState.score += 10;
        gameState.placedCards.push({
            currency: currency,
            position: placedPosition,
            correct: true
        });

        updateGameStatus(gameMessages.correctPlacement
            .replace('{title}', currency.title)
            .replace('{period}', currency.period));

        // Show educational explanation
        setTimeout(() => showExplanation(currency), 1500);

    } else {
        // Incorrect placement
        slot.classList.add('incorrect');
        gameState.placedCards.push({
            currency: currency,
            position: placedPosition,
            correct: false
        });

        updateGameStatus(gameMessages.incorrectPlacement
            .replace('{title}', currency.title));
    }

    updateScoreDisplay();

    // Check if game is complete
    if (gameState.placedCards.length === currencyHistoryData.length) {
        setTimeout(() => completeGame(), 2000);
    }
}

// Calculate correct position based on chronological year
function getCorrectPosition(year) {
    const sortedData = [...currencyHistoryData].sort((a, b) => a.year - b.year);
    return sortedData.findIndex(item => item.year === year) + 1;
}

// Show detailed educational explanation
function showExplanation(currency) {
    const panel = document.getElementById('explanation-panel');
    const title = document.getElementById('explanation-title');
    const content = document.getElementById('explanation-content');

    if (panel && title && content) {
        title.textContent = `${currency.title} (${currency.period})`;
        content.textContent = currency.explanation;
        panel.style.display = 'block';

        // Auto-hide after reading time
        setTimeout(() => {
            panel.style.display = 'none';
        }, 8000);
    }
}

// Game control functions
function startGame() {
    gameState.isGameActive = true;
    gameState.placedCards = [];
    gameState.score = 0;
    gameState.attempts = 0;
    gameState.startTime = Date.now();

    updateGameStatus(gameMessages.gameStarted);
    updateScoreDisplay();

    // Reset all visual elements
    document.querySelectorAll('.timeline-slot').forEach(slot => {
        slot.classList.remove('correct', 'incorrect');
        const originalSlot = createTimelineSlot(slot.dataset.position);
        slot.innerHTML = originalSlot.innerHTML;
    });

    // Re-render cards
    renderCurrencyCards();

    console.log('🎮 English Currency Game Started!');
}

function resetGame() {
    gameState.isGameActive = false;
    gameState.placedCards = [];
    gameState.score = 0;
    gameState.attempts = 0;
    gameState.timeElapsed = 0;

    updateGameStatus(gameMessages.gameReset);
    updateScoreDisplay();

    // Reset timeline
    renderTimelineSlots();

    // Reset cards
    renderCurrencyCards();

    // Hide explanation
    const panel = document.getElementById('explanation-panel');
    if (panel) panel.style.display = 'none';

    console.log('🔄 English Currency Game Reset!');
}

function completeGame() {
    gameState.isGameActive = false;
    gameState.timeElapsed = Math.floor((Date.now() - gameState.startTime) / 1000);

    const accuracy = (gameState.placedCards.filter(p => p.correct).length / gameState.placedCards.length * 100).toFixed(1);

    updateGameStatus(gameMessages.gameComplete + ` Final Score: ${gameState.score} points | Accuracy: ${accuracy}% | Time: ${gameState.timeElapsed}s`);

    // Show completion celebration
    setTimeout(() => {
        alert(`🎓 Congratulations on completing the Currency History Timeline!\n\nYour Results:\n• Final Score: ${gameState.score} points\n• Accuracy: ${accuracy}%\n• Time Taken: ${gameState.timeElapsed} seconds\n• Total Attempts: ${gameState.attempts}\n\nYou've gained valuable knowledge about the evolution of money throughout human history!`);
    }, 1000);

    console.log('🎉 English Currency Game Completed!', {
        score: gameState.score,
        accuracy: accuracy + '%',
        time: gameState.timeElapsed + 's'
    });
}

// UI update functions
function updateGameStatus(message) {
    const statusElement = document.getElementById('game-status');
    if (statusElement) {
        statusElement.textContent = message;
    }
}

function updateScoreDisplay() {
    const scoreElement = document.getElementById('score-value');
    const attemptsElement = document.getElementById('attempts-value');
    const accuracyElement = document.getElementById('accuracy-value');

    if (scoreElement) scoreElement.textContent = gameState.score;
    if (attemptsElement) attemptsElement.textContent = gameState.attempts;

    if (accuracyElement) {
        const accuracy = gameState.attempts > 0 
            ? (gameState.placedCards.filter(p => p.correct).length / gameState.attempts * 100).toFixed(1)
            : 0;
        accuracyElement.textContent = accuracy + '%';
    }
}

function showWelcomeMessage() {
    const welcomeMessage = educationalContent.welcome;
    updateGameStatus(`${welcomeMessage.title}: ${welcomeMessage.content.substring(0, 100)}...`);
}

// Helper function for mobile drop zone highlighting
function highlightDropZone(element) {
    // Remove previous highlights
    document.querySelectorAll('.timeline-slot').forEach(s => s.classList.remove('drag-over'));

    // Add highlight to current drop zone
    const slot = element?.closest('.timeline-slot');
    if (slot && !slot.querySelector('.currency-card')) {
        slot.classList.add('drag-over');
    }
}

// Event listeners setup
function setupEventListeners() {
    const startBtn = document.getElementById('start-game');
    const resetBtn = document.getElementById('reset-game');

    if (startBtn) {
        startBtn.addEventListener('click', startGame);
    }

    if (resetBtn) {
        resetBtn.addEventListener('click', resetGame);
    }
}

// Export functions for external access if needed
window.CurrencyHistoryGame = {
    start: startGame,
    reset: resetGame,
    getState: () => gameState,
    updateStatus: updateGameStatus
};

console.log('✅ Currency History Game - Complete English JavaScript Loaded');
</script>

</body>
</html>